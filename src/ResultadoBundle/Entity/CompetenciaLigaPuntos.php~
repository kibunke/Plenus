<?php

namespace JuegosBA\ResultadoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * JuegosBA\ResultadoBundle\Entity\CompetenciaLigaPuntos
 *
 * @ORM\Entity()
 *
 */
class CompetenciaLigaPuntos extends CompetenciaLiga
{
    private $columns = ["Pts","PJ","PG","PE","PP","GF","GC","DG"];
    private $row = [0,0,0,0,0,0,0,0];
    
   /**
     * recalcularOrdenNatural
     *
     * @return array
     */
    public function recalcularOrdenNatural($zona)
    {
        $pts = [];
        $dg = [];
        $gf = [];
        $ge = [];
        $pl = $zona->getPlazas()->toArray();
        // Obtener una lista de columnas
        foreach ( $pl as $plaza){
            $aux = $zona->getDetalleZona($plaza);
            $pts[] = $aux[0];
            $dg[] = $aux[7];
            $gf[] = $aux[5];
            $ge[] = $aux[6];
        }
        
        $arr = array_multisort(
                    $pts, SORT_DESC, SORT_NUMERIC,
                    $dg, SORT_DESC, SORT_NUMERIC,
                    $gf, SORT_DESC, SORT_NUMERIC,
                    $ge, SORT_ASC, SORT_NUMERIC,
                    $pl, SORT_DESC
                );
        //$ord = 1;
        foreach ( $pl as $key=>$plaza){
            $plaza->setOrdenNatural($key);
            //echo $key;
        }        
        //die();
        return $arr;
    }
    
    /** 
     * Get columns
     *
     * @return array
     */
    public function getColumns()
    {
        return $this->columns;
    }
    
    /** 
     * Get columns
     *
     * @return array
     */
    public function getRow()
    {
        return $this->row;
    }
    
    /** 
     * Get newPartido
     *
     * @return \JuegosBA\ResultadoBundle\Entity\Partido
     */
    public function newPartido($user = null)
    {
        return new PartidoPuntos($user);
    }
}
