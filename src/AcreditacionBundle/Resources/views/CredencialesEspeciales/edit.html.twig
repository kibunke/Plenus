{% extends 'CommonBundle::layout.html.twig' %}

{% form_theme form 'AcreditacionBundle:Fields:checkbox.html.twig' %}

{% block contenidoToolbar %}
    <div class="toolbar row">
        <div class="col-md-8 hidden-xs">
            <div class="page-header">
                <h1><i class="fa fa-credit-card"></i> Credenciales Especiales<small>Todo lo referido a las acreditaciones especiales de los Juegos</small></h1>
            </div>
        </div>
        <div class="col-md-4 col-xs-12">
            <div class="toolbar-tools pull-right">
                <!-- start: TOP NAVIGATION MENU -->
                <ul class="nav navbar-right">
                    <!-- start: TO-DO DROPDOWN -->
                    <li class="dropdown">
                        <a  href="{{ path('acreditacion_credenciales_especiales')  }}">
                            <i class="fa fa-arrow-left"></i> VOLVER 
                        </a>
                    </li>
                    <li class="dropdown">
                        <a  onclick="acreditacionExport();" href="#" >
                            <i class="fa fa-file-text" aria-hidden="true"></i>  CREDENCIAL
                        </a>
                    </li>
                </ul>
                <!-- end: TOP NAVIGATION MENU -->
            </div>
        </div>
    </div>
{% endblock %}
{% block contenidoBreadcrumb %}
    <div class="row">
        <div class="col-md-12">
            <ol class="breadcrumb">
                <li>
                    <a href="{{ path('homepage') }}">
                        {{ icon('home') }}
                    </a>
                </li>                 
                <li>
                    <a href="{{ path('acreditacion_credenciales_especiales') }}">
                        Credenciales Especiales
                    </a>
                </li>
                <li class="active">
                    Editar
                </li>
            </ol>
        </div>
    </div>
{% endblock %}
{% block contenidoData %}
    <div class="panel-heading">
        <div class="col-md-6">
            <h4 class="panel-title">Editar<span class="text-bold"> Credencial Especial</span></h4>
        </div>
        <div class="panel-tools">
            <div class="dropdown">
                <a data-toggle="dropdown" class="btn btn-xs dropdown-toggle btn-transparent-grey">
                    <i class="fa fa-cog"></i>
                </a>
                <ul class="dropdown-menu dropdown-light pull-right" role="menu">
                    <li>
                        <a class="panel-collapse collapses" href="#">
                            <i class="fa fa-angle-up"></i> <span>Minimizar</span>
                        </a>
                    </li>
                    <li>
                        <a class="panel-refresh" href="#">
                            <i class="fa fa-refresh"></i> <span>Recargar</span>
                        </a>
                    </li>
                    <li>
                        <a class="panel-expand" href="#">
                            <i class="fa fa-expand"></i> <span>Fullscreen</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="panel-body">
        <div class="col-md-12 {% if(hasError) %}hasError{% endif %}">    
            {{ form_start(form, {'attr':{'novalidate':'novalidate' } }) }}
            {{ form_errors(form)}}
            {{ global_form_errors(form) }}
            <div id="credencialEspecial" class="form-group">
                <div class="form-group col-md-8 datosIzq">
                    {{ form_label(form.apellido,null, {'label_attr': {'class': 'col-md-12 text-left'} }) }}
                    <div class="input-group col-md-12">
                        <span class="input-group-addon"><i class="fa fa-pencil-square-o"></i></span>
                            {{ form_widget(form.apellido) }}
                    </div>
                    {{ form_label(form.nombre,null, {'label_attr': {'class': 'col-md-12 text-left'} }) }}
                    <div class="input-group col-md-12">
                        <span class="input-group-addon"><i class="fa fa-pencil-square-o"></i></span>
                            {{ form_widget(form.nombre) }}
                    </div>
                    <label class="control-label col-md-12 required">Documento</label>
                    <div class="input-group col-md-5 pull-left">
                        <span class="input-group-addon">
                            <i class="fa fa-hand-o-right"></i>
                        </span>
                        {{ form_widget(form.documentoTipo , {'attr': {'class': 'text-center'} }) }}
                    </div>
                    <div class="input-group col-md-6 col-md-offset-6">
                        <div class="input-group-addon ">#</div>
                        {{ form_widget(form.documentoNro, {'attr': {'class': 'text-center'} }) }}
                    </div>
                    {{ form_label(form.area,null, {'label_attr': {'class': 'col-md-12 text-left'} }) }}
                    <div class="input-group col-md-12">
                        <span class="input-group-addon"><i class="fa fa-hand-o-right"></i></span>
                            {{ form_widget(form.area) }}
                    </div>
                    {{ form_label(form.funcion,null, {'label_attr': {'class': 'col-md-12 text-left'} }) }}
                    <div class="input-group margin-bottom-sm col-md-12">
                        <span class="input-group-addon"><i class="fa fa-hand-o-right"></i></span>
                            {{ form_widget(form.funcion) }}
                    </div>
                    {{ form_label(form.letraIdentificacion ,null, {'label_attr': {'class': 'col-md-12 text-left'} }) }}
                    <div class="input-group margin-bottom-sm col-md-12">
                        <span class="input-group-addon"><i class="fa fa-hand-o-right"></i></span>
                            {{ form_widget(form.letraIdentificacion, {'attr': {'class': 'text-center'} }) }}
                    </div>
                    <label class="col-md-12 control-label required">
                        Accesos
                    </label> 

                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="text-center col-md-2" ><small>SECTOR 1</small></th>
                                <th class="text-center col-md-2" ><small>SECTOR 2</small></th>
                                <th class="text-center col-md-2" ><small>SECTOR 3</small></th>
                                <th class="text-center col-md-2" ><small>SECTOR 4</small></th>
                                <th class="text-center col-md-2" ><small>SECTOR 5</small></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-center">{{ form_widget(form.accesoSector1) }}</td>
                                <td class="text-center">{{ form_widget(form.accesoSector2) }}</td>
                                <td class="text-center">{{ form_widget(form.accesoSector3) }}</td>
                                <td class="text-center">{{ form_widget(form.accesoSector4) }}</td>
                                <td class="text-center">{{ form_widget(form.accesoSector5) }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-group col-md-4 datosDer text-center">
                    <a id="contenedorAvatar" class="thumbnail">
                        {% if (entity.hasAvatar()) %}
                            <img id="personal_avatar" src="data:image/jpg;base64,{{ entity.avatar.archivo() }}" alt="Foto de Acreditación"/>
                        {% else%}
                            <img id="personal_avatar" src=" {{asset('bundles/acreditacion/images/avatar.png') }}" alt="Foto de Acreditación"/>
                        {% endif %}
                    </a>
                    <div class="col-md-8 col-md-offset-2 text-center">
                        <div class="btn-group btn-group-justified" role="group" aria-label="...">
                            <div class="btn-group" role="group">
                                <button onclick="$.CredencialesEsp.cargar();" type="button" class="btn btn-xs btn-azure"><span class="glyphicon glyphicon-open"></span>  Cargar</button>
                            </div>
                            <div class="btn-group" role="group">
                                <button onclick="$.CredencialesEsp.capturar();" type="button" class="btn btn-xs btn-dark-red"><span class="glyphicon glyphicon-camera"></span>  Capturar</button>
                            </div>
                        </div> 
                    </div>
                    <div id="avatarCaptureContainer" class="hidden">
                        {{ form_widget(form.avatarCapture) }}
                    </div>
                </div>
                <div class="col-md-12 text-right">
                    {{ form_widget(form.submit, {'attr': {'class': 'btn-primary'} }) }}
                </div>

                <div class="modal fade" id="capturadorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
                    <div class="modal-dialog panel-primary" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="exampleModalLabel">Capturar Foto</h4>
                            </div>
                            <div class="modal-body">
                                <div id="fotoCapturador" class=""></div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hidden">
                {{ form_rest(form) }}
            </div>
            {{ form_end(form) }}
        </div>
    </div>
    <div id="credencialesExport" class="modal fade " tabindex="-1" role="dialog">
        <div class="modal-dialog  modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title"><i class="fa fa-file-text" aria-hidden="true"></i>  CREDENCIALES</h5>
                </div>
                <div class="modal-body">
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
{% endblock %}
{% block otherStylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/common/plugins/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.min.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/common/plugins/sweetalert/lib/sweet-alert.css' ) }}" />
    <link rel="stylesheet" href="{{ asset('bundles/common/css/hackjQueryUi.css' ) }}" />
    <link rel="stylesheet" href="{{ asset('bundles/acreditacion/css/layout.css' ) }}" />
    <link rel="stylesheet" href="{{ asset('bundles/acreditacion/css/credencialesEsp.css' ) }}" />
{% endblock %}

{% block otherJavascripts %}
    <script src="{{ asset('bundles/common/plugins/bootstrap-switch/dist/js/bootstrap-switch.min.js') }}"></script>
    <script src="{{ asset('bundles/acreditacion/js/photobooth/photobooth_min.js') }}"></script>
    <script src="{{ asset('bundles/common/plugins/sweetalert/lib/sweet-alert.min.js' )}}"></script>       
    <script src="{{ asset('bundles/acreditacion/js/credencialesEsp.js' )}}"></script> 
    <script src="{{ asset('bundles/acreditacion/js/layout.js' )}}"></script> 
    <script type="text/javascript">
                                    $(document).ready(function () {
                                        $.CredencialesEsp.init("{{ path('funcionjuegos_funciones') }}");
                                    });

                                    function acreditacionExport() {
                                        $("#credencialesExport div.modal-body").html('<object id="acreditacionObject" data="{{ path('acreditacion_credenciales_especiales_imprimir', {'data': [entity.id] |json_encode() } )}}" type="application/pdf" ></object>');
                                        $("#credencialesExport").modal();
                                    }
    </script>
{% endblock %}  