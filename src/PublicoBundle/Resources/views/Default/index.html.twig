{% extends 'PublicoBundle::layout.html.twig' %}

{% block contenido %}
    <div class="row" id="section-no-print">
        <div class="col-sm-12">
            <!--<div id="alertCron" class="col-sm-12">
                    <h2 style="font-size: 25px !important" class="bg-danger padding-20 bounceIn text-center text-red">
                        <i class="fa fa-exclamation-circle"></i> Eventos reprogramados, chequee los cronogramas!<br><br>
                        <a style="font-size: 18px" class="text-red pull-left " href="{{ asset('REPROGRAMACION ATLETISMO PARA PERSONAS CON DISCAPACIDAD.pdf')}}"><i class="fa fa-file-pdf-o fa-lg" aria-hidden="true"></i> REPROGRAMACION ATLETISMO PARA PERSONAS CON DISCAPACIDAD</a><br>
                    </h2>
            </div>-->
            <div class="col-sm-6" style="overflow: hidden;">
                <!--<div class="panel panel-white">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Cronogramas <span class="text-bold">Generales</span>
                            <span class="badge badge-danger pull-right" title="Cronogramas">
                                <span class="fa fa-calendar"></span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0;height: 310px;">
                        <h4 style="font-size: 17px;">
                            <a href="{{ asset('AgendaDeActividadesDestacadas.pdf')}}" class="text-danger">
                                <i class="fa fa-file-pdf-o fa-lg" aria-hidden="true"></i> Agenda de actividades destacadas
                            </a>
                        </h4>
                        <h4 style="font-size: 17px;">
                            <a href="{{ asset('CronogramaDeAtletismo.pdf')}}" class="text-danger">
                                <i class="fa fa-file-pdf-o fa-lg" aria-hidden="true"></i> Cronograma de Atletismo
                            </a>
                        </h4>
                        <h4 style="font-size: 17px;">
                            <a href="{{ asset('CronogramaDeAtletismo(PCD).pdf')}}" class="text-danger">
                                <i class="fa fa-file-pdf-o fa-lg" aria-hidden="true"></i> Cronograma de Atletismo (PCD)
                            </a>
                        </h4>
                        <h4 style="font-size: 17px;">
                            <a href="{{ asset('CronogramaDeCultura.pdf')}}" class="text-danger">
                                <i class="fa fa-file-pdf-o fa-lg" aria-hidden="true"></i> Cronograma de Cultura
                            </a>
                        </h4>
                    </div>
                </div>-->
                <div class="panel panel-white">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Medallero <span class="text-bold">Parcial</span>
                            <span class="badge badge-danger pull-right" title="Cronogramas">
                                <span class="fa fa-trophy"></span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0;height: 310px;overflow: auto;">
                        <div class="tabbable no-margin no-padding partition-dark">
                            <div class="tab-content partition-white">
                                <table id="medallero_001" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th class="center"><span class="fa fa-trophy"></span></th>
                                            <th><span class="fa fa-building-o"></span> Municipio</th>
                                            <th class="center"><img style="height: 30px;" src="{{ asset('bundles/resultado/images/medallas/oro_thumb.png') }}"></th>
                                            <th class="center"><img style="height: 30px;" src="{{ asset('bundles/resultado/images/medallas/plata_thumb.png') }}"></th>
                                            <th class="center"><img style="height: 30px;" src="{{ asset('bundles/resultado/images/medallas/bronce_thumb.png') }}"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for municipio in medalleroGral %}
                                            <tr>
                                                <td class="center">
                                                    {#<span class="fa fa-ellipsis-v"></span>#}
                                                    {{ loop.index }}
                                                </td>
                                                <td>
                                                    <a href="{{ path('publicoMedallero_detalle', {'id' : municipio['id'] }) }}"
                                                    {% if (loop.index < 0 )%}
                                                        <span class="text-small block text-light" style="font-size: 15px !important;">{#{ municipio["region"] | raw }#}<strong><small><i class="fa fa-spinner fa-spin"></i></small>/<i class="fa fa-spinner fa-spin"></i></strong></span>
                                                        <span class="text-large" title="{{ municipio["nombre"] }}"> <i class="fa fa-spinner fa-spin fa-lg"></i>{#{ municipio["nombre"] }#}</span>
                                                    {% else %}
                                                        <span class="text-large" title="{{ municipio["nombre"] }}" style="font-size: 13px !important;font-weight: bold;color: #888">{{ municipio["nombre"] }}</span><br>
                                                        <span class="text-small block text-light" style="font-size: 11px !important;">{{ municipio["region"] | raw }}</span>
                                                    {% endif %}
                                                    {#
                                                    <a href="#" class="btn">
                                                        <i class="fa fa-pencil"></i>
                                                    </a>#}
                                                </td>
                                                <td class="center">
                                                    {{ municipio["medallero"][0] }}
                                                </td>
                                                <td class="center">
                                                    {{ municipio["medallero"][1] }}
                                                </td>
                                                <td class="center">
                                                    {{ municipio["medallero"][2] }}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>                
            </div>
            <div class="col-sm-6" style="overflow: hidden;">
                <div class="panel panel-white" style="min-height: 205px;">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Mira la Final en <span class="text-bold">Vivo</span>
                            <span class="badge badge-danger pull-right" title="Canal de YouTube">
                                <span class="fa fa-youtube-play"></span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0">
                        <!--<p class="bg-danger padding-15">A PARTIR DEL LUNES 03 18:00 Hs.</p>-->
                        <!--https://youtu.be/wKqo2wuJS8s
                        https://www.youtube.com/embed/Tr8uesBowS4?list=PLsMILDNKDKSGs4J9Q66JcwD-hXeXbFvRK-->
                        <!--<iframe style="width: 100%;height: auto" src="https://www.youtube.com/embed/9QdL-Mmb3-w" frameborder="0" allowfullscreen></iframe>-->
                        <iframe width="100%" height="290" src="https://www.youtube.com/embed/jubOvSxOmxE" frameborder="0" allowfullscreen></iframe>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
<!--    <div class="row">
        <div class="col-sm-12">
            <h2 style="color: #000;text-align: center;font-weight: bold;">
                Resultados Final Provincial 2016
            </h2>
        </div>
    </div>-->
    <div class="row" id="section-no-print">
        <div class="col-sm-12">
            <div class="col-sm-4" style="overflow: hidden;">
                <div class="panel panel-white">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Filtro <span class="text-bold">Municipio + Fecha</span>
                            <span class="badge badge-danger pull-right" title="Eventos filtrados">
                                <span class="fa fa-filter"></span>
                                <span id="eventos_filtrados">{#{ eventos | length }#}</span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0">
                        {{ form(formMunicipio) }}
                        <div id="tree" class="tree-demo"></div>
                    </div>
                </div>
            </div>
            <div class="col-sm-4" style="overflow: hidden;">
                <div class="panel panel-white">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Filtro <span class="text-bold">Evento + Fecha</span>
                            <span class="badge badge-danger pull-right" title="Eventos filtrados">
                                <span class="fa fa-filter"></span>
                                <span id="eventos_filtrados">{#{ eventos | length }#}</span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0">
                        {{ form(formEvento) }}
                        <div id="tree" class="tree-demo"></div>
                    </div>
                </div>
            </div>
            <div class="col-sm-4" style="overflow: hidden;">
                <div class="panel panel-white">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Filtro <span class="text-bold">NÂ° Evento</span>
                            <span class="badge badge-danger pull-right" title="Eventos filtrados">
                                <span class="fa fa-filter"></span>
                                <span id="eventos_filtrados">{#{ eventos | length }#}</span>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body" style="margin-top: 0;padding-top: 0">
                        {{ form_start(formNroEvento) }}
                        {{ form_row(formNroEvento.Evento) }}
                            <div style="display: none">
                                {{ form_row(formNroEvento.EventoAux) }}
                            </div>
                        {{ form_end(formNroEvento) }}
                        <a href="{{ path('publico_index_escenarios') }}" class="btn-info btn"><span class="fa fa-map-marker"></span> Escenarios deportivos y culturales</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" >
        <div class="col-sm-12">
            <div style="" id="reloadTable" class="col-md-12">
                {{ include ('PublicoBundle:Default:index.table.html.twig') }}
            </div>
        </div>
    </div>
    <!-- start: SUBVIEW EXAMPLE FOR THIS PAGE ONLY -->
    <a id="sub_go" href="#example-subview-1" class="hidden show-sv"></a>
    <div id="example-subview-1" class="no-display">
        <div class="col-md-10 col-md-offset-1 ajax-cont"></div>
    </div>
{% endblock %}
{% block otherStylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/common/plugins/jstree/dist/themes/default/style.css') }}">
{% endblock %}

{% block otherJavascripts %}
    <script src="{{ asset('bundles/common/plugins/jstree/dist/jstree.min.js') }}"></script>
<script>
        (function ($) {
            // no se sobreescribe el namespace, si ya existe
            var table;
            var cantEditOriginal;
            $.Default = $.Default || {};
            $.Default.init = function() {
                $("#form_Evento").append($("#form_Evento option").remove().sort(function(a, b) {
                    var at = $(a).text(), bt = $(b).text();
                    return (at > bt)?1:((at < bt)?-1:0);
                }));
                $("#form_Evento").prepend('<option value>Seleccione</option>');
                $("#form_Evento").val("");
                
                //
                table=$('#medallero_001').dataTable( {
                    "autoWidth": false,
                    "language": {
                        "url": "{{ asset('bundles/common/plugins/DataTables/Spanish.json') }}"
                    },
                    "bPaginate": false,
                    "ordering": false,
                    "columnDefs": [ {
                                    "searchable": false,
                                    "orderable": false,
                                    "targets": [3]
                                }
                    ],
                    "initComplete": function(settings, json) {
                        $('#medallero_001_filter').parent().parent().find('div').each(function(){
                            $(this).removeClass('col-sm-6').addClass('col-sm-4');
                        })
                    }
                });                  

                setInterval(function(){
                    $('#alertCron h2').removeClass('bounceIn');
                    setTimeout(function(){
                        $('#alertCron h2').addClass('bounceIn');
                    },100)
                    
                    //console.log($('#alertCron h2').text())
                },5000)
            }            
            $.Default.eventoDetalle = function(node) {
                $('#panel-config .modal-footer').hide();
                $('#panel-config .modal-title').html("Eventos alcanzados por el Cronograma");
                $('#panel-config .modal-body').html($(node).parent().find(".eventos_detalles").html());
                $('#panel-config').modal();
            }          
        })(jQuery);
        $(document).ready(function(){$.Default.init();});
    </script>    
{% endblock %}